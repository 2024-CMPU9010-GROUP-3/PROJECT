name: Branch Checks

on:
  pull_request:

jobs:
  validate-name:
    runs-on: ubuntu-latest
    steps:
      - name: Extract branch name
        shell: bash
        id: get_branch_name
        run: echo "##[set-output name=branch;]${GITHUB_HEAD_REF}"

      - name: Validate branch name
        if: ${{
          ! startsWith(steps.get_branch_name.outputs.branch, 'backend/') &&
          ! startsWith(steps.get_branch_name.outputs.branch, 'frontend/') &&
          ! startsWith(steps.get_branch_name.outputs.branch, 'documentation/') &&
          ! startsWith(steps.get_branch_name.outputs.branch, 'distribution/') &&
          ! startsWith(steps.get_branch_name.outputs.branch, 'misc/')
          }}
        run: |
          echo "Branch name '${{ steps.get_branch_name.outputs.branch }}' is not valid. Rename the branch to match the pattern 'backend/', 'frontend/', 'documentation/', 'distribution/', or 'misc/'."
          exit 1
